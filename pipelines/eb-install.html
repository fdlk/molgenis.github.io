<!DOCTYPE html><!--[if lt IE 8]><html lang="en" class="ie"><![endif]--><!--[if gt IE 8]><!--><html lang="en"><!--<![endif]--><head><meta charset="utf-8"><title>MOLGENIS - Install Environment</title><meta name="description" content="How to install easybuild"><meta name="author" content="MOLGENIS community"><meta name="handheldfriendly" content="true"><meta name="mobileoptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta http-equiv="cleartype" content="on"><script src="/res/js/jquery-1.11.3.min.js"> </script><script src="/res/js/bootstrap.min.js"></script><link rel="stylesheet" href="/res/css/prism.css"><link rel="stylesheet" href="/res/css/application.css" type="text/css"><link rel="shortcut icon" href="/favicon.png" type="image/png"><link rel="alternate" type="application/rss+xml" href="/blog/feed.xml" title="undefined"></head><body><header class="molgenis-docs-header"><div role="navigation" class="navbar navbar-fixed-top"><div class="header-container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand active"><img src="/res/images/wordmark-blue.png" alt="undefined" class="wordmark"/></a></div><div class="collapse navbar-collapse">              <ul class="nav navbar-nav"><li><a href="/software">TOOLS</a></li><li><a href="/documentation">DOCUMENTATION</a></li><li class="active"><a href="/pipelines">PIPELINES</a></li><li><a href="/develop">DEVELOP</a></li><li><a href="/support">SUPPORT</a></li><li><a href="#searchbox" data-toggle="collapse"><i class="glyphicon glyphicon-search"></i></a></li></ul></div></div></div><div id="searchbox" class="collapse"><form role="search" action="/search-results"><input placeholder="Search" name="q" class="form-control"/></form></div><div class="molgenis-docs-titlebar active"><div class="container"> <h1>Install Environment</h1><p>How to install easybuild   </p></div></div></header><div class="molgenis-docs-body"><div class="container"><div class="row"><div role="complementary" class="col-md-3"><nav id="molgenis-docs-sidebar" class="molgenis-docs-sidebar hidden-print hidden-xs hidden-sm"><ul id="molgenis-docs-sidenav" class="nav molgenis-docs-sidenav"></ul></nav><script>$(function() {
    var sideNav = $("#molgenis-docs-sidenav");
    var index = 0;
    $(".row h1").each(function() {
        
        //create id for h1
        var id = (index++) + $(this).text().replace(/\s/gi,"-").replace(/\W/g,"").toLowerCase();
        $(this).prepend("<a name=\""+id+"\"></a>");
        
        //add h1 to list
        var li = $("<li><a href=\"#"+id+"\">"+$(this).text()+"</a></li>")
        sideNav.append(li);
        
        //wrap h1 into section
        var section = $(this).wrap("<section id=\""+id+"\"></section>").parent();
        
        //wrap parts of h1 into one section
        $(this).parent().nextUntil("h1").each(function(){            
            section.append($(this));
        });
        
        //repeat for h2
        if($("h2",$(this).parent()).length > 0) {
            var ul = $("<ul class=\"nav\"></ul>");
            li.append(ul);
            
            $("h2",$(this).parent()).each(function(){
            
                //create id for h2
                var id = (index++) + $(this).text().replace(/\s/gi,"-").replace(/\W/g,"").toLowerCase();
                $(this).prepend("<a name=\""+id+"\"></a>");
        
                //wrap h2 into section
                var section = $(this).wrap("<section id=\""+id+"\"></section>").parent();
        
                ul.append($("<li><a href=\"#"+id+"\">"+$(this).text()+"</a></li>"));
        
                //wrap parts of h2 into one section
                $(this).parent().nextUntil("h2").each(function(){            
                    section.append($(this));
                });
            

            });
        }
    });    
    
    //add "back to top"
    sideNav.append("<li><a href=\"#top\" style=\"font-size:smaller\">Back to top</a></li>");
    var $body   = $(document.body);
    
    //enable the 'active' highlighting using scrollspy plugin
    $('body').scrollspy({
        target: '#molgenis-docs-sidebar'
    });
    $('#molgenis-docs-sidebar').width($('#molgenis-docs-sidebar').parent().width());
    
    //enable affix
    $('#molgenis-docs-sidebar').affix({
        offset: {
            top: $('#molgenis-docs-sidebar').offset().top,
            bottom: $('.molgenis-docs-footer').outerHeight(true) + 10
        }
    });
    
    //resize affix box when window resizes
    $(window).resize(function () {
            $('.molgenis-docs-sidebar').width($('#molgenis-docs-sidebar').parent().width());
        });
    
    $("table").addClass("table table-bordered");
});</script></div><div role="main" class="col-md-9 contents"><h1>1. Install environment</h1><h3>1) Get depad-utils and configure environment</h3><p>Login and navigate to your home folder</p>
<pre><code class="language-bash">cd ${HOME}
</code></pre>
<p>download and unzip <a href="attachments/depad-utils.zip">these files</a> <strong><em>(There are hidden files/directories)</em></strong></p>
<p><strong><em>Note:</em></strong> Make sure that the etc/skel/.bashrc from the zip file was already deployed as root
and that /etc/skel/.bashrc was copied to your home dir when it was created( cp /etc/skel/.bashrc ~ ).
If your .bashrc does not have the stuff from the template, you can add it manually and notify an admin to deploy the template in /etc/skel/.</p>
<p>create folder where the modules will be </p>
<pre><code class="language-bash">mkdir /apps/modules/

###copy all files in the folder apps/modules/ from the zip to the server (if /apps/modules is not possible, NB the copying of these files should go somewhere else)

cp -r apps/modules/* apps/modules/.lmod/ /apps/modules/
</code></pre>
<p><strong><em>NB: Lmod must already have been deployed as root using your Linux distro&#39;s package manager.</em></strong>
<strong><em>NB2 if apps modules is not possible then ~/.bashrc should also be changed </em></strong></p>
<p>If lmod is not installed, please do the following (admins-only) in our case for CentOS use </p>
<pre><code>$root&gt;: yum install lmod
</code></pre><p>To verify /apps/modules/modules.bashrc gets sourced: logout + login.
When ${HPC_ENV_PREFIX} is set your are good to continue to the next step.</p>
<pre><code class="language-bash">echo ${HPC_ENV_PREFIX}
</code></pre>
<h3>2) Create main folders for our HPC environment.</h3><pre><code class="language-bash">mkdir -m 0755 ${HPC_ENV_PREFIX}
mkdir -m 2775 ${HPC_ENV_PREFIX}/data/
mkdir -m 2775 ${HPC_ENV_PREFIX}/modules/
mkdir -m 2775 ${HPC_ENV_PREFIX}/software/
mkdir -m 2775 ${HPC_ENV_PREFIX}/sources/
mkdir -m 2770 ${HPC_ENV_PREFIX}/.tmp/
</code></pre>
<h3>3) Download EasyBuild bootstrap script</h3><pre><code class="language-bash">export EASYBUILD_VERSION=2.8.1
mkdir -p /${HPC_ENV_PREFIX}/sources/EasyBuild/
cd /${HPC_ENV_PREFIX}/sources/EasyBuild
curl -O https://raw.githubusercontent.com/hpcugent/easybuild-framework/develop/easybuild/scripts/bootstrap_eb.py
mv bootstrap_eb.py bootstrap_eb_${EASYBUILD_VERSION}.py
</code></pre>
<h3>4) Bootstrap EasyBuild in apps dir.</h3><pre><code class="language-bash">python /${HPC_ENV_PREFIX}/sources/EasyBuild/bootstrap_eb_${EASYBUILD_VERSION}.py ${HPC_ENV_PREFIX}
</code></pre>
<h3>5) Sanity check</h3><p>logout and login again</p>
<pre><code class="language-bash">module load EasyBuild
module list
eb --version
</code></pre>
<h3>6) Install toolchain</h3><pre><code class="language-bash">eb foss-2015b.eb â€“robot
</code></pre>
<p><strong><em>Note: some sources should be downloaded manually</em> (see below)</strong></p>
<pre><code class="language-bash">scp gcc-4.9.3.tar.bz2 /${HPC_ENV_PREFIX}/sources/g/GCC/
scp gmp-6.0.0a.tar.bz2 /${HPC_ENV_PREFIX}/sources/g/GCC/
scp mpc-1.0.2.tar.gz /${HPC_ENV_PREFIX}/sources/g/GCC/
scp mpfr-3.1.2.tar.gz /${HPC_ENV_PREFIX}/sources/g/GCC/
</code></pre>
<h3>7) Installing additional packages</h3><p>The following packages should be on the cluster/VM (this can only done with root access:</p>
<pre><code class="language-bash">yum install libibverbs-devel
yum install openssl-devel
yum install unzip
yum install libX11-devel
yum install libXrender-devel
yum install libXext-devel
yum install mesa-libGL-devel
yum install mesa-libGLU-devel
</code></pre>
<h3>8a) Get molgenis-easybuild repo</h3><p>Now that easybuild is installed we have to have the molgenis easybuild configs because it contains a lot of custom easyconfigs that are (sometimes were at the moment we began with this) not in the original easybuild repo from Ghent University: <a href="https://github.com/molgenis/easybuild-easyconfigs">https://github.com/molgenis/easybuild-easyconfigs</a></p>
<p>There are 2 options:</p>
<ul>
<li>Fork this repo to your own repo and then do a git clone (on the cluster, then you can skip 8b)</li>
<li>Download the latest zip or tar.gz at</li>
</ul>
<p><a href="https://github.com/molgenis/easybuild-easyconfigs/releases/">https://github.com/molgenis/easybuild-easyconfigs/releases/</a> (proceed to 8b)</p>
<h3>8b) Put the new repo on the cluster/VM</h3><pre><code class="language-bash">scp -r easybuild-easyconfigs yourusername@yourcluster.nl:${root}/${pathToMYeasybuildconfigs}
</code></pre><center><br><i>See something that could be better? <a href="https://github.com/molgenis/molgenis.org/tree/master/public/pipelines/eb-install.md">Edit this page at Github</a></i><br></center></div></div></div></div><footer class="molgenis-docs-footer"><p>MOLGENIS and these docs are maintained by the <a href="about/team">MOLGENIS team and collaborators</a>. <br/> Documentation source code released under the <a href="/LICENSE-MIT">MIT License</a>, documentation contents under <a href="/LICENSE-CC">CC BY 3.0</a>, and MOLGENIS software code under the <a href="/LICENSE-LGPLv3">LGPLv3 License</a>.<ul class="text-muted"><li>Version 1.8.0</li><li>Â·</li><li><a href="https://github.com/molgenis/molgenis">MOLGENIS Github</a></li><li>Â·</li><li><a href="http://github.com/molgenis/molgenis/issues">MOLGENIS Issues</a></li><li>Â·</li><li><a href="https://github.com/molgenis/molgenis.org/tree/master/public">Docs Github    </a></li><li>Â·</li><li><a href="http://github.com/molgenis/molgenis.org/issues">Docs Issues</a></li><li>Â·</li><li><a href="https://github.com/molgenis/molgenis/releases">Releases</a></li></ul></p></footer><script src="/res/js/prism.js"></script></body></html>