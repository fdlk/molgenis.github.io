<!DOCTYPE html><!--[if lt IE 8]><html lang="en" class="ie"><![endif]--><!--[if gt IE 8]><!--><html lang="en"><!--<![endif]--><head><meta charset="utf-8"><title>MOLGENIS - Upload</title><meta name="description" content="How to structure and load your data"><meta name="author" content="MOLGENIS community"><meta name="handheldfriendly" content="true"><meta name="mobileoptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta http-equiv="cleartype" content="on"><script src="/res/js/jquery-1.11.3.min.js"> </script><script src="/res/js/bootstrap.min.js"></script><link rel="stylesheet" href="/res/css/prism.css"><link rel="stylesheet" href="/res/css/application.css" type="text/css"><link rel="shortcut icon" href="/favicon.png" type="image/png"><link rel="alternate" type="application/rss+xml" href="/blog/feed.xml" title="undefined"></head><body><header class="molgenis-docs-header"><div role="navigation" class="navbar navbar-fixed-top"><div class="header-container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand active"><img src="/res/images/wordmark-blue.png" alt="undefined" class="wordmark"/></a></div><div class="collapse navbar-collapse">              <ul class="nav navbar-nav"><li><a href="/software">TOOLS</a></li><li class="active"><a href="/documentation">DOCUMENTATION</a></li><li><a href="/pipelines">PIPELINES</a></li><li><a href="/develop">DEVELOP</a></li><li><a href="/support">SUPPORT</a></li><li><a href="#searchbox" data-toggle="collapse"><i class="glyphicon glyphicon-search"></i></a></li></ul></div></div></div><div id="searchbox" class="collapse"><form role="search" action="/search-results"><input placeholder="Search" name="q" class="form-control"/></form></div><div class="molgenis-docs-titlebar active"><div class="container"> <h1>Upload</h1><p>How to structure and load your data   </p></div></div></header><div class="molgenis-docs-body"><div class="container"><div class="row"><div role="complementary" class="col-md-3"><nav id="molgenis-docs-sidebar" class="molgenis-docs-sidebar hidden-print hidden-xs hidden-sm"><ul id="molgenis-docs-sidenav" class="nav molgenis-docs-sidenav"></ul></nav><script>$(function() {
    var sideNav = $("#molgenis-docs-sidenav");
    var index = 0;
    $(".row h1").each(function() {
        
        //create id for h1
        var id = (index++) + $(this).text().replace(/\s/gi,"-").replace(/\W/g,"").toLowerCase();
        $(this).prepend("<a name=\""+id+"\"></a>");
        
        //add h1 to list
        var li = $("<li><a href=\"#"+id+"\">"+$(this).text()+"</a></li>")
        sideNav.append(li);
        
        //wrap h1 into section
        var section = $(this).wrap("<section id=\""+id+"\"></section>").parent();
        
        //wrap parts of h1 into one section
        $(this).parent().nextUntil("h1").each(function(){            
            section.append($(this));
        });
        
        //repeat for h2
        if($("h2",$(this).parent()).length > 0) {
            var ul = $("<ul class=\"nav\"></ul>");
            li.append(ul);
            
            $("h2",$(this).parent()).each(function(){
            
                //create id for h2
                var id = (index++) + $(this).text().replace(/\s/gi,"-").replace(/\W/g,"").toLowerCase();
                $(this).prepend("<a name=\""+id+"\"></a>");
        
                //wrap h2 into section
                var section = $(this).wrap("<section id=\""+id+"\"></section>").parent();
        
                ul.append($("<li><a href=\"#"+id+"\">"+$(this).text()+"</a></li>"));
        
                //wrap parts of h2 into one section
                $(this).parent().nextUntil("h2").each(function(){            
                    section.append($(this));
                });
            

            });
        }
    });    
    
    //add "back to top"
    sideNav.append("<li><a href=\"#top\" style=\"font-size:smaller\">Back to top</a></li>");
    var $body   = $(document.body);
    
    //enable the 'active' highlighting using scrollspy plugin
    $('body').scrollspy({
        target: '#molgenis-docs-sidebar'
    });
    $('#molgenis-docs-sidebar').width($('#molgenis-docs-sidebar').parent().width());
    
    //enable affix
    $('#molgenis-docs-sidebar').affix({
        offset: {
            top: $('#molgenis-docs-sidebar').offset().top,
            bottom: $('.molgenis-docs-footer').outerHeight(true) + 10
        }
    });
    
    //resize affix box when window resizes
    $(window).resize(function () {
            $('.molgenis-docs-sidebar').width($('#molgenis-docs-sidebar').parent().width());
        });
    
    $("table").addClass("table table-bordered");
});</script></div><div role="main" class="col-md-9 contents"><p><strong>
In this section you will learn how to upload you data. Let us not wait any longer! After a quick re-cap of terminology and formats we will start off with the most basic step, importing your data.
</strong></p>
<h1>Terminology</h1><p>In this section we introduce and explain, terminology of MOLGENIS</p>
<ul>
<li>Package: A namespace item. Multiple packages can create a namspace where entities can live in. The default namespace in molgenis is called &quot;default&quot;</li>
<li>Data set: A collections of entities that are contextually related. </li>
<li>Entity: An entity is the template and collection of a subject like a table in a database.</li>
<li>Entity: We also use the term entity for the actual data that is collected based on the template from an entity (Term above), like a row in a database. In the future we will change this term to &quot;instance&quot; to avoid complexity and double use of the same term</li>
<li>Attribute: An attribute describes the charcteristics of a data item in an entity, Like a column in a database</li>
</ul>
<h1>Formats</h1><p>The MOLGENIS upload module supports the following file formats and data:</p>
<table>
<thead>
<tr>
<th>file format</th>
<th>file extention</th>
<th>data formats</th>
</tr>
</thead>
<tbody>
<tr>
<td>CSV</td>
<td>&quot;.csv&quot; &quot;.txt&quot; &quot;.tsv&quot; &quot;.zip&quot;</td>
<td>EMX</td>
</tr>
<tr>
<td>Excel</td>
<td>&quot;.xls&quot; &quot;.xlsx&quot;</td>
<td>EMX</td>
</tr>
<tr>
<td>OWL</td>
<td>&quot;.owl.zip&quot;</td>
<td>OWL</td>
</tr>
<tr>
<td>VCF (version 4.0)</td>
<td>&quot;vcf&quot; &quot;.vcf.gz&quot;</td>
<td>VCF (version 4.0)</td>
</tr>
</tbody>
</table>
<p>Abbreviations:</p>
<ul>
<li>CSV: Comma Separated Value</li>
<li>OWL: Web Ontology Language</li>
<li>VCF: Variant Call Format</li>
<li>EMX: Entity Model eXtensible</li>
</ul>
<h1>Overview</h1><p>The upload module is the place in MOLGENIS where you can upload your data into the MOLGENIS application. If you have the permissions, you will see the upload menu item.</p>
<p><img src="/res/images/upload/upload-menu-item.png?raw=true," alt="Upload menu item" title="upload menu item"></p>
<p>The different pages will be explained by uploading the<a name="advanced-data-example"></a> &quot;Advanced data example&quot; (<a href="/data/advanced_data_example_v20151104.xlsx">download</a>) example data set.</p>
<p>The steps are: </p>
<ol>
<li>Upload file</li>
<li>Options</li>
<li>Packages</li>
<li>Validation</li>
<li>Result</li>
</ol>
<p>Navigation buttons at the bottom of the pages:</p>
<ul>
<li>Previous: Go to the previous page.</li>
<li>Next: Go to the next page.</li>
<li>Restart: Push this button when you want to start importing a new data set. It will redirect you to the start of this wizard. Pushing this button will restart the wizard. The upload job continues to upload the data set.</li>
<li>Finish: The same as Restart.</li>
</ul>
<h1>Upload file</h1><ol>
<li>Select a file to upload.</li>
<li>Click on the next button.</li>
</ol>
<p><img src="/res/images/upload/upload-file-screen.png?raw=true," alt="Upload file screen" title="Upload file"></p>
<h1>Choose options</h1><p>Select a data upload option. On this page you can select the rules of how to upload your data into MOLGENIS. Because this dataset is an new data set to the application we leave the default option &quot;Add entities&quot; selected. In tabular data sets, the term entities refers to data-rows.
It is important to understand that this selection is about the data and not the meta data of the data set. </p>
<p>Choose options:</p>
<ul>
<li>Add entities: Importer adds new entities or fails if entity exists.</li>
<li>Add entities / update existing: Importer adds new entities or updates existing entities.</li>
<li>Update entities: Importer updates existing entities or fails if entity does not exist.</li>
</ul>
<p><img src="/res/images/upload/options-screen.png?raw=true," alt="Upload file screen" title="Options"></p>
<h1>Choose packages</h1><p>Because the entity (table) persons has no package defined, we get the option to choose another package different from the MOLGENIS default package. The select options list the available packages in the data set.</p>
<p><img src="/res/images/upload/packages-screen.png?raw=true," alt="Upload file screen" title="Packages"></p>
<h1>Check validation</h1><p>When you see this page the validation is already done. This page validates the structure of the meta data.</p>
<p>&quot;Entities&quot; table where all the entities (tables) are defined.</p>
<ul>
<li>Name: Name of entity</li>
<li>Importable: Is this entity inportable or not. Two options (Yes, No) </li>
</ul>
<p>&quot;Entity fields&quot; table that will contain information about the fields of an entity (Columns of the table)</p>
<ul>
<li>Name: Name of entity</li>
<li>Detected: A comma separated list of fields that were found for this entity</li>
<li>Required: Are there required fields defined in the meta data that are missing in the entity?</li>
<li>Available: Are there fields in the meta data that are optionel and were not found in the entity?</li>
<li>Unknown: Are there fields defined in the entity that were undefined in the meta data?</li>
</ul>
<p><img src="/res/images/upload/validation-screen.png?raw=true," alt="Upload file screen" title="Validation"></p>
<h1>Review results</h1><p>When this page is shown with the &quot;import succes&quot; message, then you know that your data and metadata have been uploaded correctly.</p>
<p>After the data is uploaded into MOLGENIS, you can change the permissions for the entities.</p>
<p>In the permissions view you can do this repeatedely for multiple groups:</p>
<ol>
<li>Select a group: which user group will get these permissions.</li>
<li>Select permission for an entity (table). You can choose between: Edit, View, Count and None. For more information about permissions visit the <a href="guide-admin">Admin guide</a></li>
</ol>
<p><img src="/res/images/upload/result-screen.png?raw=true," alt="Upload file screen" title="Result"></p>
<h1>What next?</h1><p>To learn more you could read the <a href="ref-emx">EMX reference</a>.
Alternatively directly move on to <a href="guide-explore">explore your data</a></p>
<h1>Import API</h1><h2>Endpoints</h2><p>[SERVER URL]/plugin/importwizard/importFile/
This endpoint can be used to import a file into MOLGENIS by providing the file by for example the use of a webform.</p>
<h5>Required parameter:</h5><p>MultipartFile file</p>
<p>[SERVER URL]/plugin/importwizard/importByUrl/
This endpoint can be used to import a file into MOLGENIS by providing a URL to the file.</p>
<h5>Required parameter:</h5><p>String url</p>
<h5>optional parameters for both endpoints:</h5><p>entityName: The name of the entity, this only has effect for VCF files (.vcf and .vcf.gz)
    Default value is the filename.</p>
<p>action: the database action to import with, options are:
    ADD: add records, error on duplicate records
    ADD_UPDATE_EXISTING: add, update existing records
    UPDATE: update records, throw an error if records are missing in the database
    ADD_IGNORE_EXISTING: Adds new records, ignores existing records</p>
<p>Note that for VCF files only &quot;add&quot; is supported</p>
<p>Default value is &quot;ADD&quot;.</p>
<p>notify: Boolean value to indicate of success and failure should be reported to the user by email.
    Default value is &quot;false&quot;.</p>
<h2>Response:</h2><p>The service responds with a statuscode <strong>201 CREATED</strong> if the preliminary checks went well and the import run has been started, it also returns a href to the metadata of the importrun.
The href can be used to poll the status of the import by checking the status field of the importrun, also the message field of the importrun entity gives some basic feedback on what was imported or what went wrong.</p>
<h2>Examples</h2><h3>importByURL Example:</h3><pre><code>https://molgenis01.gcc.rug.nl/plugin/importwizard/importByUrl
notify=false&amp;entityName=demo&amp;url=https://raw.githubusercontent.com/bartcharbon/molgenis/feature/importService/
molgenis-app/src/test/resources/vcf/test.vcf
</code></pre><h5>Response:</h5><pre><code>201 CREATED
/api/v2/ImportRun/[ImportRunID]
</code></pre><h3>importFile example using cURL(<a href="https://curl.haxx.se">https://curl.haxx.se</a>):</h3><pre><code>curl -H &quot;x-molgenis-token:[TOKEN]&quot; -X POST -F&quot;file=@path/to/file/test.vcf&quot; -Faction=update -FentityName=newName
-Fnotify=true https://[SERVER URL]/plugin/importwizard/importFile
</code></pre><p>A token can be obtained using:</p>
<pre><code>curl -H &quot;Content-Type: application/json&quot; -X POST -d &#39;{&quot;username&quot;=&quot;USERNAME&quot;, &quot;password&quot;=&quot;YOURPASSWORD&quot;}&#39; https://[SERVER URL]/api/v1/login
</code></pre><h5>Response:</h5><pre><code>201 CREATED
/api/v2/ImportRun/[ImportRunID]
</code></pre><h2>Exceptions:</h2><p>In case anything went wrong even before starting the importrun a <strong>400 BAD REQUEST</strong> is returned.</p>
<h4>Examples of known exceptions are:</h4><ul>
<li>Invalid action: [ILLEGAL VALUE] valid values: ADD, ADD_UPDATE_EXISTING, UPDATE, ADD_IGNORE_EXISTING</li>
<li>Update mode UPDATE is not supported, only ADD is supported for VCF</li>
<li>A repository with name NewEntity already exists</li>
</ul><center><br><i>See something that could be better? <a href="https://github.com/molgenis/molgenis.org/tree/master/public/documentation/guide-upload.md">Edit this page at Github</a></i><br></center></div></div></div></div><footer class="molgenis-docs-footer"><p>MOLGENIS and these docs are maintained by the <a href="http://www.gccgroningen.nl/about-us/people-at-the-gcc/">MOLGENIS team and collaborators</a>. <br/> Documentation source code released under the <a href="/LICENSE-MIT">MIT License</a>, documentation contents under <a href="/LICENSE-CC">CC BY 3.0</a>, and MOLGENIS software code under the <a href="/LICENSE-LGPLv3">LGPLv3 License</a>.<ul class="text-muted"><li>Version 1.8.0</li><li>·</li><li><a href="https://github.com/molgenis/molgenis">MOLGENIS Github</a></li><li>·</li><li><a href="http://github.com/molgenis/molgenis/issues">MOLGENIS Issues</a></li><li>·</li><li><a href="https://github.com/molgenis/molgenis.org/tree/master/public">Docs Github    </a></li><li>·</li><li><a href="http://github.com/molgenis/molgenis.org/issues">Docs Issues</a></li><li>·</li><li><a href="https://github.com/molgenis/molgenis/releases">Releases</a></li></ul></p></footer><script src="/res/js/prism.js"></script></body></html>